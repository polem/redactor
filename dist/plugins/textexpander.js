!function(e){e.Redactor.prototype.textexpander=function(){return{init:function(){this.opts.textexpander&&this.$editor.on("keyup.redactor-limiter",e.proxy(function(t){var r=t.which;if(r==this.keyCode.SPACE){var n=this.textexpander.getCurrent(),o=e(n).clone(),i=e("<div>");i.html(o);var s=i.html();i.remove();for(var c=this.opts.textexpander.length,a=0,p=0;c>p;p++){var h=new RegExp(this.opts.textexpander[p][0]);if(-1!=s.search(h)){a++,s=s.replace(h,this.opts.textexpander[p][1]),i=e("<div>"),i.html(s),i.append(this.selection.getMarker());var l=i.html().replace(/&nbsp;/,"");e(n).replaceWith(l),i.remove()}}0!==a&&this.selection.restore()}},this))},getCurrent:function(){var e;return window.getSelection?e=window.getSelection():document.selection&&"Control"!=document.selection.type&&(e=document.selection),this.utils.browser("mozilla")?e.anchorNode.previousSibling:e.anchorNode}}}}(jQuery);